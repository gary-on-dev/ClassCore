{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\ClassCore\\\\client\\\\src\\\\pages\\\\Results.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../components/Auth';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Results() {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [results, setResults] = useState([]);\n  const [error, setError] = useState('');\n  const [form, setForm] = useState({\n    student: '',\n    type: 'exam',\n    subject: '',\n    score: '',\n    attendance: 'present',\n    comment: ''\n  });\n  useEffect(() => {\n    const fetchResults = async () => {\n      try {\n        const school = (user === null || user === void 0 ? void 0 : user.school) || '6826c6741e8bb0ac59a1bea9';\n        const params = {\n          school\n        };\n        if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n          params.student = user.userId;\n        }\n        console.log('Fetching results:', params);\n        const response = await axios.get('http://localhost:5000/api/results', {\n          params\n        });\n        console.log('Results received:', response.data);\n\n        // Calculate rankings and aggregates\n        const aggregatedResults = aggregateResults(response.data);\n        setResults(aggregatedResults);\n      } catch (error) {\n        var _error$response, _error$response$data;\n        console.error('Fetch results error:', error);\n        setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to load results');\n      }\n    };\n    fetchResults();\n  }, [user]);\n\n  // Aggregate results for display\n  const aggregateResults = rawResults => {\n    // Group by student\n    const studentMap = {};\n    rawResults.forEach(result => {\n      const studentId = result.student._id;\n      if (!studentMap[studentId]) {\n        studentMap[studentId] = {\n          student: result.student.email,\n          subjects: {},\n          totalScore: 0,\n          count: 0,\n          attendance: '',\n          comment: ''\n        };\n      }\n      if (result.type === 'exam' || result.type === 'cat') {\n        studentMap[studentId].subjects[result.subject] = result.score;\n        studentMap[studentId].totalScore += result.score || 0;\n        studentMap[studentId].count += 1;\n      } else if (result.type === 'attendance') {\n        studentMap[studentId].attendance = result.attendance;\n      } else if (result.type === 'comment') {\n        studentMap[studentId].comment = result.comment;\n      }\n    });\n\n    // Convert to array and calculate aggregates\n    const aggregated = Object.values(studentMap).map(student => ({\n      ...student,\n      sum: student.totalScore,\n      average: student.count > 0 ? (student.totalScore / student.count).toFixed(2) : 0\n    }));\n\n    // Sort by average for ranking\n    aggregated.sort((a, b) => b.average - a.average);\n\n    // Add rank\n    return aggregated.map((student, index) => ({\n      ...student,\n      rank: index + 1\n    }));\n  };\n  const handleInputChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async () => {\n    try {\n      setError('');\n      const payload = {\n        student: form.student,\n        type: form.type,\n        subject: form.type === 'exam' || form.type === 'cat' ? form.subject : undefined,\n        score: form.type === 'exam' || form.type === 'cat' ? parseFloat(form.score) : undefined,\n        attendance: form.type === 'attendance' ? form.attendance : undefined,\n        comment: form.type === 'comment' ? form.comment : undefined,\n        school: (user === null || user === void 0 ? void 0 : user.school) || '6826c6741e8bb0ac59a1bea9'\n      };\n      console.log('Submitting result:', payload);\n      const response = await axios.post('http://localhost:5000/api/results', payload);\n      console.log('Result added:', response.data);\n      alert('Result added successfully');\n      setForm({\n        student: '',\n        type: 'exam',\n        subject: '',\n        score: '',\n        attendance: 'present',\n        comment: ''\n      });\n      // Refresh results\n      const resultsResponse = await axios.get('http://localhost:5000/api/results', {\n        params: {\n          school: (user === null || user === void 0 ? void 0 : user.school) || '6826c6741e8bb0ac59a1bea9'\n        }\n      });\n      setResults(aggregateResults(resultsResponse.data));\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Add result error:', error);\n      setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Failed to add result');\n    }\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-container\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please log in to view results.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 44\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Define subjects for table\n  const subjects = ['Math', 'English', 'Science']; // Adjust as needed\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }, this), user.role === 'teacher' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Add Result\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"student\",\n        value: form.student,\n        onChange: handleInputChange,\n        placeholder: \"Student ID\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"type\",\n        value: form.type,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"exam\",\n          children: \"Exam\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"cat\",\n          children: \"CAT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"attendance\",\n          children: \"Attendance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"comment\",\n          children: \"Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this), (form.type === 'exam' || form.type === 'cat') && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"subject\",\n          value: form.subject,\n          onChange: handleInputChange,\n          placeholder: \"Subject (e.g., Math)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"score\",\n          value: form.score,\n          onChange: handleInputChange,\n          placeholder: \"Score (0-100)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), form.type === 'attendance' && /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"attendance\",\n        value: form.attendance,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"present\",\n          children: \"Present\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"absent\",\n          children: \"Absent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"excused\",\n          children: \"Excused\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }, this), form.type === 'comment' && /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"comment\",\n        value: form.comment,\n        onChange: handleInputChange,\n        placeholder: \"Comment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        children: \"Add Result\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this), results.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No results available\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"results-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Rank\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Student\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this), subjects.map(subject => /*#__PURE__*/_jsxDEV(\"th\", {\n            children: subject\n          }, subject, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Sum\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Average\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Attendance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: results.map(result => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: result.rank\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: result.student\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 17\n          }, this), subjects.map(subject => /*#__PURE__*/_jsxDEV(\"td\", {\n            children: result.subjects[subject] || '-'\n          }, subject, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 19\n          }, this)), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: result.sum\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: result.average\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: result.attendance || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: result.comment || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this)]\n        }, result.student, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n_s(Results, \"T6jS53AHQDta6cqg04SlAWLQ6/8=\");\n_c = Results;\nexport default Results;\nvar _c;\n$RefreshReg$(_c, \"Results\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Results","_s","user","results","setResults","error","setError","form","setForm","student","type","subject","score","attendance","comment","fetchResults","school","params","role","userId","console","log","response","get","data","aggregatedResults","aggregateResults","_error$response","_error$response$data","rawResults","studentMap","forEach","result","studentId","_id","email","subjects","totalScore","count","aggregated","Object","values","map","sum","average","toFixed","sort","a","b","index","rank","handleInputChange","e","target","name","value","handleSubmit","payload","undefined","parseFloat","post","alert","resultsResponse","_error$response2","_error$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","placeholder","onClick","length","_c","$RefreshReg$"],"sources":["C:/Users/admin/Desktop/ClassCore/client/src/pages/Results.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { AuthContext } from '../components/Auth';\r\nimport axios from 'axios';\r\n\r\nfunction Results() {\r\n  const { user } = useContext(AuthContext);\r\n  const [results, setResults] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [form, setForm] = useState({\r\n    student: '',\r\n    type: 'exam',\r\n    subject: '',\r\n    score: '',\r\n    attendance: 'present',\r\n    comment: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchResults = async () => {\r\n      try {\r\n        const school = user?.school || '6826c6741e8bb0ac59a1bea9';\r\n        const params = { school };\r\n        if (user?.role === 'student') {\r\n          params.student = user.userId;\r\n        }\r\n        console.log('Fetching results:', params);\r\n        const response = await axios.get('http://localhost:5000/api/results', { params });\r\n        console.log('Results received:', response.data);\r\n\r\n        // Calculate rankings and aggregates\r\n        const aggregatedResults = aggregateResults(response.data);\r\n        setResults(aggregatedResults);\r\n      } catch (error) {\r\n        console.error('Fetch results error:', error);\r\n        setError(error.response?.data?.error || 'Failed to load results');\r\n      }\r\n    };\r\n    fetchResults();\r\n  }, [user]);\r\n\r\n  // Aggregate results for display\r\n  const aggregateResults = (rawResults) => {\r\n    // Group by student\r\n    const studentMap = {};\r\n    rawResults.forEach((result) => {\r\n      const studentId = result.student._id;\r\n      if (!studentMap[studentId]) {\r\n        studentMap[studentId] = {\r\n          student: result.student.email,\r\n          subjects: {},\r\n          totalScore: 0,\r\n          count: 0,\r\n          attendance: '',\r\n          comment: '',\r\n        };\r\n      }\r\n      if (result.type === 'exam' || result.type === 'cat') {\r\n        studentMap[studentId].subjects[result.subject] = result.score;\r\n        studentMap[studentId].totalScore += result.score || 0;\r\n        studentMap[studentId].count += 1;\r\n      } else if (result.type === 'attendance') {\r\n        studentMap[studentId].attendance = result.attendance;\r\n      } else if (result.type === 'comment') {\r\n        studentMap[studentId].comment = result.comment;\r\n      }\r\n    });\r\n\r\n    // Convert to array and calculate aggregates\r\n    const aggregated = Object.values(studentMap).map((student) => ({\r\n      ...student,\r\n      sum: student.totalScore,\r\n      average: student.count > 0 ? (student.totalScore / student.count).toFixed(2) : 0,\r\n    }));\r\n\r\n    // Sort by average for ranking\r\n    aggregated.sort((a, b) => b.average - a.average);\r\n\r\n    // Add rank\r\n    return aggregated.map((student, index) => ({\r\n      ...student,\r\n      rank: index + 1,\r\n    }));\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setError('');\r\n      const payload = {\r\n        student: form.student,\r\n        type: form.type,\r\n        subject: form.type === 'exam' || form.type === 'cat' ? form.subject : undefined,\r\n        score: form.type === 'exam' || form.type === 'cat' ? parseFloat(form.score) : undefined,\r\n        attendance: form.type === 'attendance' ? form.attendance : undefined,\r\n        comment: form.type === 'comment' ? form.comment : undefined,\r\n        school: user?.school || '6826c6741e8bb0ac59a1bea9',\r\n      };\r\n      console.log('Submitting result:', payload);\r\n      const response = await axios.post('http://localhost:5000/api/results', payload);\r\n      console.log('Result added:', response.data);\r\n      alert('Result added successfully');\r\n      setForm({ student: '', type: 'exam', subject: '', score: '', attendance: 'present', comment: '' });\r\n      // Refresh results\r\n      const resultsResponse = await axios.get('http://localhost:5000/api/results', {\r\n        params: { school: user?.school || '6826c6741e8bb0ac59a1bea9' },\r\n      });\r\n      setResults(aggregateResults(resultsResponse.data));\r\n    } catch (error) {\r\n      console.error('Add result error:', error);\r\n      setError(error.response?.data?.error || 'Failed to add result');\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return <div className=\"page-container\"><p>Please log in to view results.</p></div>;\r\n  }\r\n\r\n  // Define subjects for table\r\n  const subjects = ['Math', 'English', 'Science']; // Adjust as needed\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      <h1>Results</h1>\r\n      {error && <p className=\"error\">{error}</p>}\r\n      {user.role === 'teacher' && (\r\n        <div className=\"form-container\">\r\n          <h3>Add Result</h3>\r\n          <input\r\n            type=\"text\"\r\n            name=\"student\"\r\n            value={form.student}\r\n            onChange={handleInputChange}\r\n            placeholder=\"Student ID\"\r\n          />\r\n          <select name=\"type\" value={form.type} onChange={handleInputChange}>\r\n            <option value=\"exam\">Exam</option>\r\n            <option value=\"cat\">CAT</option>\r\n            <option value=\"attendance\">Attendance</option>\r\n            <option value=\"comment\">Comment</option>\r\n          </select>\r\n          {(form.type === 'exam' || form.type === 'cat') && (\r\n            <>\r\n              <input\r\n                type=\"text\"\r\n                name=\"subject\"\r\n                value={form.subject}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Subject (e.g., Math)\"\r\n              />\r\n              <input\r\n                type=\"number\"\r\n                name=\"score\"\r\n                value={form.score}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Score (0-100)\"\r\n              />\r\n            </>\r\n          )}\r\n          {form.type === 'attendance' && (\r\n            <select name=\"attendance\" value={form.attendance} onChange={handleInputChange}>\r\n              <option value=\"present\">Present</option>\r\n              <option value=\"absent\">Absent</option>\r\n              <option value=\"excused\">Excused</option>\r\n            </select>\r\n          )}\r\n          {form.type === 'comment' && (\r\n            <textarea\r\n              name=\"comment\"\r\n              value={form.comment}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Comment\"\r\n            />\r\n          )}\r\n          <button onClick={handleSubmit}>Add Result</button>\r\n        </div>\r\n      )}\r\n      {results.length === 0 ? (\r\n        <p>No results available</p>\r\n      ) : (\r\n        <table className=\"results-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Rank</th>\r\n              <th>Student</th>\r\n              {subjects.map((subject) => (\r\n                <th key={subject}>{subject}</th>\r\n              ))}\r\n              <th>Sum</th>\r\n              <th>Average</th>\r\n              <th>Attendance</th>\r\n              <th>Comment</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {results.map((result) => (\r\n              <tr key={result.student}>\r\n                <td>{result.rank}</td>\r\n                <td>{result.student}</td>\r\n                {subjects.map((subject) => (\r\n                  <td key={subject}>{result.subjects[subject] || '-'}</td>\r\n                ))}\r\n                <td>{result.sum}</td>\r\n                <td>{result.average}</td>\r\n                <td>{result.attendance || '-'}</td>\r\n                <td>{result.comment || '-'}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Results;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}